{% extends "layout.html" %}

{% block content %}
<div class="container mt-4">
    <h2 id="lesson_title">Practice Feedback Summary</h2>
    
    <div class="feedback-summary-container">
        <!-- Summary Cards -->
        <div class="row mb-4">
            <!-- Head & Neck Summary Card -->
            <div class="col-md-4 mb-3">
                <div class="card h-100">
                    <div class="card-header bg-primary text-white">
                        <h5 class="card-title mb-0">Head & Neck</h5>
                    </div>
                    <div class="card-body">
                        <div class="feedback-score mb-3 text-center">
                            <div class="score-circle {% if session.get('head_neck_score', 0) >= 80 %}score-excellent{% elif session.get('head_neck_score', 0) >= 60 %}score-good{% else %}score-needs-work{% endif %}">
                                {{ session.get('head_neck_score', 0) }}%
                            </div>
                        </div>
                        <p class="card-text">{{ session.get('head_neck_feedback', 'No feedback recorded for head and neck posture.') }}</p>
                        <ul class="feedback-tips">
                            <li>Keep your chin tucked slightly toward your throat</li>
                            <li>Ears should be directly above shoulders</li>
                            <li>Gaze should be level and relaxed</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Shoulders Summary Card -->
            <div class="col-md-4 mb-3">
                <div class="card h-100">
                    <div class="card-header bg-primary text-white">
                        <h5 class="card-title mb-0">Shoulders</h5>
                    </div>
                    <div class="card-body">
                        <div class="feedback-score mb-3 text-center">
                            <div class="score-circle {% if session.get('shoulders_score', 0) >= 80 %}score-excellent{% elif session.get('shoulders_score', 0) >= 60 %}score-good{% else %}score-needs-work{% endif %}">
                                {{ session.get('shoulders_score', 0) }}%
                            </div>
                        </div>
                        <p class="card-text">{{ session.get('shoulders_feedback', 'No feedback recorded for shoulder posture.') }}</p>
                        <ul class="feedback-tips">
                            <li>Shoulders should be level and relaxed</li>
                            <li>Drop shoulders down away from ears</li>
                            <li>Keep shoulders balanced, neither rounded forward nor pulled back</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Spine Summary Card -->
            <div class="col-md-4 mb-3">
                <div class="card h-100">
                    <div class="card-header bg-primary text-white">
                        <h5 class="card-title mb-0">Spine</h5>
                    </div>
                    <div class="card-body">
                        <div class="feedback-score mb-3 text-center">
                            <div class="score-circle {% if session.get('spine_score', 0) >= 80 %}score-excellent{% elif session.get('spine_score', 0) >= 60 %}score-good{% else %}score-needs-work{% endif %}">
                                {{ session.get('spine_score', 0) }}%
                            </div>
                        </div>
                        <p class="card-text">{{ session.get('spine_feedback', 'No feedback recorded for spine alignment.') }}</p>
                        <ul class="feedback-tips">
                            <li>Maintain natural curves of your spine</li>
                            <li>Sit tall through the crown of your head</li>
                            <li>Avoid slouching or over-arching</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Overall Summary -->
        <div class="overall-summary mb-4 p-4 border rounded bg-light">
            <h3>Overall Assessment</h3>
            <div class="row align-items-center">
                <div class="col-md-3">
                    <div class="overall-score-circle text-center {% if session.get('overall_score', 0) >= 80 %}score-excellent{% elif session.get('overall_score', 0) >= 60 %}score-good{% else %}score-needs-work{% endif %}">
                        {{ session.get('overall_score', 0) }}%
                    </div>
                </div>
                <div class="col-md-9">
                    <p class="overall-feedback">{{ session.get('overall_feedback', 'Complete a full posture assessment to see your overall results.') }}</p>
                    <div class="progress mb-3" style="height: 20px;">
                        <div class="progress-bar" role="progressbar" style="width: {{ session.get('overall_score', 0) }}%;" aria-valuenow="{{ session.get('overall_score', 0) }}" aria-valuemin="0" aria-valuemax="100">{{ session.get('overall_score', 0) }}%</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Practice Duration -->
        <div class="practice-duration mb-4">
            <h4>Practice Duration</h4>
            <p>You practiced for {{ session.get('practice_duration', '0') }} minutes.</p>
        </div>
        
        <!-- Navigation Buttons -->
        <div class="d-flex justify-content-between mt-5 pt-3 border-top">
            <a href="{{ url_for('practice') }}" class="btn btn-secondary">&laquo; Back to Practice</a>
            <a href="{{ url_for('results') }}" class="btn btn-success">View Detailed Results &raquo;</a>
        </div>
    </div>
</div>
{% endblock %}